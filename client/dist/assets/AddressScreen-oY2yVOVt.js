import{c as T,a as F,j as e,N as R,r as t,B as n}from"./index-Dn45rCbr.js";import{u as q,a as I}from"./deliveryApiSlice-DvahbnS8.js";import{C as M}from"./CheckoutSteps-cayYj5-x.js";import{u as G}from"./bagApiSlice-ZNHpXZS5.js";const H=()=>{const u=T(),p=F();if(!u.state||!u.state.fromBag)return e.jsx(R,{to:"/"});const[i,g]=t.useState(""),[o,h]=t.useState(""),[c,b]=t.useState(""),[f,y]=t.useState(""),[j,v]=t.useState(""),[m,w]=t.useState(""),[r,N]=t.useState(!1),[x,P]=t.useState(!0),{data:a,refetch:C}=q(),[E,{isLoading:S}]=I(),{data:l,isLoading:k,error:A,refetch:O}=G(),D=async s=>{var L;s.preventDefault();try{await E({province:i,district:o,area:c,landmark:f,description:j,email:m}).unwrap(),C(),n.success("Address saved successfully.")}catch(d){n.error(((L=d==null?void 0:d.data)==null?void 0:L.message)||d.error)}};t.useEffect(()=>{a&&(g(a.province),h(a.district),b(a.area),y(a.landmark),v(a.description),w(a.email),N(!0),P(!1))},[a]);const B=()=>{if(!o||!i||!c||!m){n.error("Please enter addresses to proceed.");return}else x?n.error("Please save your address to continue"):p("/payment",{state:{fromAddress:!0}})};return e.jsxs(e.Fragment,{children:[e.jsx(M,{step1:!0,step2:!0}),e.jsxs("div",{className:"px-16 pt-8 sm:p-4 flex justify-around lg:px-8 lg:gap-x-4 md:flex-col md:items-center md:gap-y-4 sm:px-2",children:[e.jsxs("form",{className:"flex flex-col items-center justify-center border w-1/2 px-10 py-6 rounded-sm shadow-md md:w-2/3 sm:px-2 sm:w-full",children:[e.jsx("h1",{className:"font-bold text-2xl text-gray-600 mb-6",children:"Shipping Address"}),e.jsxs("div",{className:"flex items-center gap-x-3 mb-4 w-full",children:[e.jsx("label",{className:"text-gray-500 w-1/3 sm:text-sm",children:"Province *"}),e.jsx("input",{type:"text",className:"border border-gray-600 rounded-sm w-2/3 py-1 px-3",required:!0,value:i,onChange:s=>g(s.target.value),disabled:r,maxLength:"20"})]}),e.jsxs("div",{className:"flex items-center gap-x-3 mb-4 w-full",children:[e.jsx("label",{className:"text-gray-500 w-1/3 sm:text-sm",children:"District *"}),e.jsx("input",{type:"text",className:"border border-gray-600 w-2/3 rounded-sm py-1 px-3 ",required:!0,value:o,onChange:s=>h(s.target.value),disabled:r,maxLength:"20"})]}),e.jsxs("div",{className:"flex items-center gap-x-3 mb-4 w-full",children:[e.jsx("label",{className:"text-gray-500 w-1/3 sm:text-sm",children:"Area/Locality *"}),e.jsx("input",{type:"text",className:"border border-gray-600 rounded-sm w-2/3 py-1 px-3",required:!0,value:c,onChange:s=>b(s.target.value),disabled:r,maxLength:"40"})]}),e.jsxs("div",{className:"flex items-center gap-x-3 mb-4 w-full",children:[e.jsx("label",{className:"text-gray-500 w-1/3 sm:text-sm",children:"Nearest Landmark"}),e.jsx("input",{type:"text",className:"border border-gray-600 rounded-sm w-2/3 py-1 px-3 ",value:f,onChange:s=>y(s.target.value),disabled:r,maxLength:"40"})]}),e.jsxs("div",{className:"flex items-center gap-x-3 mb-4 w-full",children:[e.jsx("label",{className:"text-gray-500 w-1/3 sm:text-sm",children:"Additional Description"}),e.jsx("textarea",{rows:2,type:"text",className:"border border-gray-600 rounded-sm w-2/3 py-1 px-3",value:j,onChange:s=>v(s.target.value),disabled:r,maxLength:"100"})]}),e.jsxs("div",{className:"flex items-center gap-x-3 mb-4 w-full",children:[e.jsx("label",{className:"text-gray-500 w-1/3 sm:text-sm",children:"Email *"}),e.jsx("input",{type:"email",className:"border border-gray-600 rounded-sm w-2/3 py-1 px-3",required:!0,value:m,onChange:s=>w(s.target.value),disabled:r,maxLength:"40"})]}),e.jsx("button",{type:"submit",className:`bg-[#FF3E6B] w-full py-2 rounded-sm text-white font-bold hover:bg-[#f46486] ${x?"block":"hidden"}`,onClick:D,disabled:S,children:S?"Saving...":"Save"}),e.jsxs("span",{className:`text-base font-semibold text-gray-600 mb-4 ${x?"hidden":"block"}`,children:["To change shipping address, goto"," ",e.jsx("span",{className:"text-blue-600 underline cursor-pointer hover:text-blue-400",onClick:()=>{N(!1),p("/myaddress")},children:"Saved Address"})]})]}),e.jsx("div",{className:"w-1/3 border shadow-md px-4 py-6 rounded h-fit lg:w-1/2 md:w-2/3 sm:w-full",children:k?e.jsx("div",{className:"text-center mt-4 font-bold",children:"Loading your bag..."}):A?e.jsx("p",{className:"text-xl font-bold text-center mt-4",children:A.data.message}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"flex text-gray-500 font-bold mb-6",children:["PRICE DETAILS ",e.jsxs("span",{children:[" (",l.products.length," items)"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"my-2 flex justify-between text-gray-500",children:["Total MRP ",e.jsxs("span",{children:["रु ",l.itemPrice]})]}),e.jsxs("p",{className:"mt-2 flex justify-between text-gray-500",children:["Shipping Price ",e.jsxs("span",{children:["रु ",l.shippingPrice]})]}),e.jsx("p",{className:"text-xs mb-2 font-thin text-gray-500",children:"shipping is free of cost for total mrp over रु 4000"}),e.jsx("hr",{className:"h-px my-4 border-0 dark:bg-gray-300"}),e.jsxs("p",{className:"my-2 text-lg font-bold text-gray-600 flex justify-between",children:["Total Amount ",e.jsxs("span",{children:["रु ",l.totalPrice]})]})]}),e.jsx("button",{type:"submit",className:"bg-[#FF3E6B] w-full text-center py-3 text-white font-bold rounded mt-4 text-sm cursor-pointer hover:bg-[#f46486]",onClick:B,children:"PROCEED TO PAYMENT"})]})})]})]})};export{H as default};
