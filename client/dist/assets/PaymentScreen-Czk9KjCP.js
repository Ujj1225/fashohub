import{a as N,j as e,B as d,r as y,c as w,N as v}from"./index-Dn45rCbr.js";import{C}from"./CheckoutSteps-cayYj5-x.js";import{u as E,c as P}from"./bagApiSlice-ZNHpXZS5.js";import{u as k}from"./deliveryApiSlice-DvahbnS8.js";import{a as O}from"./orderApiSlice-B-AJ7Rxk.js";import{S as c}from"./Skeleton-9Y7E4ClX.js";const S="/images/cod.png",F="/images/esewa.jpg",K="/images/khalti.png",L=({paymentMethod:s})=>{const r=N(),{data:l,isLoading:m,error:i,refetch:x}=E(),{data:o,isLoading:h,error:n}=k(),[g,{isLoading:p,isError:D}]=O(),[f]=P(),u=async()=>{var a;try{const t=await g({paymentMethod:s}).unwrap();d.success(t.message),await f(),x(),r("/")}catch(t){d.error(((a=t==null?void 0:t.data)==null?void 0:a.message)||t.error)}},j=()=>{alert("esewa payment")},b=()=>{alert("khalti payment")};return e.jsxs("div",{className:"px-4 md:px-0 md:mt-10",children:[e.jsx("h2",{className:"text-xl text-gray-600 font-semibold mb-6",children:"Order Summary"}),m||h?e.jsxs("div",{className:"p-2 flex flex-col gap-y-4",children:[e.jsx(c,{height:50}),e.jsx(c,{height:50}),e.jsx(c,{height:50})]}):i||n?e.jsx("p",{children:i.data.message||n.data.message}):e.jsxs("div",{className:"border rounded p-2 flex flex-col",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-500 mb-1",children:"Products:"}),l.products.map(a=>e.jsxs("div",{className:"flex items-center gap-x-4 sm:gap-x-2 mb-2",children:[e.jsx("img",{src:a.image,alt:"img",className:"w-10 h-10"}),e.jsxs("div",{className:"flex sm:flex-col w-full",children:[e.jsx("p",{className:"font-bold text-gray-600 line-clamp-1 w-full",children:a.name}),e.jsxs("div",{className:"flex w-full gap-x-4",children:[e.jsxs("p",{className:"text-gray-500 font-semibold w-1/2",children:["Size: ",a.size]}),e.jsxs("p",{className:"text-gray-500 font-semibold w-1/2",children:["Qty: ",a.quantity]})]})]})]},a.product))]}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"font-bold text-gray-500 sm:flex sm:flex-col",children:["Address:",e.jsxs("span",{className:"font-semibold text-gray-500 ml-2 sm:ml-0",children:[o.area.toUpperCase(),", ",o.district.toUpperCase(),","," ",o.province.toUpperCase()]})]})}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"font-bold text-gray-500 sm:flex sm:flex-col",children:["Email:",e.jsx("span",{className:"font-semibold text-gray-500 ml-2 sm:ml-0",children:o.email})]})}),e.jsx("div",{className:"mt-4",children:e.jsxs("p",{className:"font-bold text-gray-500 sm:flex sm:flex-col",children:["Subtotal:",e.jsxs("span",{className:"font-semibold text-gray-500 ml-2 sm:ml-0",children:["Rs. ",l.totalPrice]})]})}),e.jsxs("div",{className:"mt-4",children:[s==="COD"&&e.jsx("button",{onClick:u,className:"bg-[#FF3E6B] w-full text-center py-3 text-white font-bold rounded text-sm cursor-pointer hover:bg-[#f46486]",children:p?"Placing Order...":"Place Order"}),s==="Esewa"&&e.jsx("button",{onClick:j,className:"bg-[#FF3E6B] w-full text-center py-3 text-white font-bold rounded text-sm cursor-pointer hover:bg-[#f46486]",children:"Pay with Esewa"}),s==="Khalti"&&e.jsx("button",{onClick:b,className:"bg-[#FF3E6B] w-full text-center py-3 text-white font-bold rounded text-sm cursor-pointer hover:bg-[#f46486]",children:"Pay with Khalti"})]})]})]})},z=()=>{const[s,r]=y.useState("COD"),l=w();return!l.state||!l.state.fromAddress?e.jsx(v,{to:"/"}):e.jsxs("div",{children:[e.jsx(C,{step1:!0,step2:!0,step3:!0}),e.jsxs("div",{className:"flex gap-x-2 mt-8 p-10 md:flex-col sm:p-2",children:[e.jsxs("div",{className:"w-1/2 md:w-full",children:[e.jsx("h2",{className:"text-xl text-gray-600 font-semibold mb-6",children:"Select Payment Method"}),e.jsxs("div",{className:`flex items-center border rounded p-4 cursor-pointer mb-1 ${s==="COD"?"bg-gray-200":""}`,onClick:()=>r("COD"),children:[e.jsx("img",{src:S,alt:"cod",className:"w-20 h-20 rounded"}),e.jsx("label",{htmlFor:"COD",className:"ml-2 cursor-pointer text-gray-600 font-bold text-lg",children:"Cash on Delivery"})]}),e.jsxs("div",{className:`flex items-center border rounded p-4 cursor-pointer mb-1 ${s==="Esewa"?"bg-gray-200":""}`,onClick:()=>r("Esewa"),children:[e.jsx("img",{src:F,alt:"esewa",className:"w-20 h-20 rounded"}),e.jsx("label",{htmlFor:"Esewa",className:"ml-2 cursor-pointer text-gray-600 font-bold text-lg",children:"Esewa"})]}),e.jsxs("div",{className:`flex items-center border rounded p-4 cursor-pointer ${s==="Khalti"?"bg-gray-200":""}`,onClick:()=>r("Khalti"),children:[e.jsx("img",{src:K,alt:"khalti",className:"w-20 h-20 rounded"}),e.jsx("label",{htmlFor:"Khalti",className:"ml-2 cursor-pointer text-gray-600 font-bold text-lg",children:"Khalti"})]})]}),e.jsx("div",{className:"w-1/2 md:w-full",children:e.jsx(L,{paymentMethod:s})})]})]})};export{z as default};
