import{d as y,j as e,B as l}from"./index-Dn45rCbr.js";import{c as w,d as b,e as N}from"./orderApiSlice-B-AJ7Rxk.js";import{d as P}from"./userApiSlice-BcONqH5P.js";import{S as m}from"./sweetalert2.all-mF0vAFOJ.js";import{S as c}from"./Skeleton-9Y7E4ClX.js";const B=()=>{const{oid:p}=y(),{data:s,isLoading:j,error:t,refetch:o}=w(p),{data:a}=P(),[g,{isLoading:x}]=b(),[v,{isLoading:h}]=N(),f=async r=>{m.fire({text:"Are you sure the order has been delivered?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, it's delivered!",cancelButtonText:"No, cancel",width:"300px"}).then(async n=>{var d;if(n.isConfirmed)try{await g(r).unwrap(),l.success("The order has been marked as delivered"),o()}catch(i){l.error(((d=i==null?void 0:i.data)==null?void 0:d.message)||(i==null?void 0:i.error))}})},u=async r=>{m.fire({text:"Are you sure the order has been paid?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, it's paid!",cancelButtonText:"No, cancel",width:"300px"}).then(async n=>{var d;if(n.isConfirmed)try{await v(r).unwrap(),l.success("The order has been marked as paid"),o()}catch(i){l.error(((d=i==null?void 0:i.data)==null?void 0:d.message)||(i==null?void 0:i.error))}})};return e.jsx("div",{className:"p-10 sm:p-4 xsm:p-2",children:j?e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsx(c,{height:100}),e.jsx(c,{height:100}),e.jsx(c,{height:100})]}):t?e.jsx("p",{className:"font-bold text-center",children:t.data.message||t.error}):e.jsxs("div",{className:"text-gray-500 font-bold text-base flex flex-col gap-y-2",children:[e.jsx("h2",{className:"text-lg text-gray-600 font-bold",children:"Order Details:"}),e.jsxs("div",{className:"flex justify-between xsm:flex-col",children:[e.jsxs("div",{children:[e.jsxs("p",{children:["Order Id: ",s._id]}),e.jsxs("p",{children:["Payment: ",s.isPaid?"Paid":"Not Paid",s.paidAt&&e.jsxs("span",{children:[", ",s.paidAt.slice(0,10)]})]}),e.jsxs("p",{children:["Delivery: ",s.isDelivered?"Delivered":"Not Delivered",s.deliveredAt&&e.jsxs("span",{children:[", ",s.deliveredAt.slice(0,10)]})]}),e.jsxs("p",{children:["Order Placed On: ",s.createdAt.slice(0,10)]}),e.jsxs("p",{children:["Payment Method: ",s.paymentMethod]})]}),((a==null?void 0:a.isAdmin)||(a==null?void 0:a.isDeliveryPartner))&&e.jsxs("div",{className:"flex flex-col gap-y-2 xsm:mt-2",children:[!s.isDelivered&&e.jsx("button",{className:"bg-blue-600 font-bold text-white p-2 rounded hover:cursor-pointer hover:bg-blue-500 w-40 sm:w-36",onClick:()=>f(s._id),disabled:x,children:x?"Loading...":"Mark Delivered"}),!s.isPaid&&e.jsx("button",{className:"bg-green-600 font-bold text-white p-2 rounded hover:cursor-pointer hover:bg-green-500 w-40 sm:w-36",onClick:()=>u(s._id),disabled:h,children:h?"Loading...":"Mark Paid"})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-700 mt-2",children:"Customer Details:"}),e.jsx("div",{className:"flex items-center border px-2 py-1 rounded shadow gap-x-2 xsm:gap-x-1",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("p",{children:["User Id: ",s.user._id]}),e.jsxs("p",{children:["Name: ",s.user.name]}),e.jsxs("p",{children:["Phone: ",s.user.phone]}),e.jsxs("p",{children:["Email: ",s.delivery.email]})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-700 mt-2",children:"Products Details:"}),s.bag.products.map(r=>e.jsxs("div",{className:"flex items-center border px-2 py-1 rounded shadow gap-x-2 xsm:gap-x-1",children:[e.jsx("img",{src:r.image,className:"w-20 h-20",alt:"img"}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"text-black w-full text-ellipsis whitespace-nowrap overflow-hidden",children:r.brand}),e.jsx("p",{className:"font-light text-black text-ellipsis whitespace-nowrap overflow-hidden",children:r.name}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("p",{className:"w-1/3",children:["Size: ",r.size]}),e.jsxs("p",{className:"w-1/3",children:["Qty: ",r.quantity]}),e.jsxs("p",{className:"w-1/3",children:["Rs. ",r.sellingPrice]})]})]})]},r.product))]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-700 mt-2",children:"Delivery Details:"}),e.jsx("div",{className:"flex items-center border px-2 py-1 rounded shadow gap-x-2 xsm:gap-x-1",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("p",{children:["Area: ",s.delivery.area]}),e.jsxs("p",{children:["District: ",s.delivery.district]}),e.jsxs("p",{children:["Province: ",s.delivery.province]}),s.delivery.landmark.replace(/\s+/g,"")!==""&&e.jsxs("p",{children:["Landmark: ",s.delivery.landmark]}),s.delivery.description.replace(/\s+/g,"")!==""&&e.jsxs("p",{children:["Description: ",s.delivery.description]})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-gray-700 mt-2",children:"Price Details:"}),e.jsx("div",{className:"flex items-center border px-2 py-1 rounded shadow gap-x-2 xsm:gap-x-1",children:e.jsxs("div",{className:"w-full",children:[e.jsxs("p",{children:["Items Price: Rs. ",s.bag.itemPrice]}),e.jsxs("p",{children:["Shipping Price: Rs. ",s.bag.shippingPrice]}),e.jsxs("p",{children:["Total Price: Rs. ",s.bag.totalPrice]})]})})]})]})})};export{B as default};
