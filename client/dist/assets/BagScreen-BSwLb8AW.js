import{j as e,L as m,B as d,a as h}from"./index-Dn45rCbr.js";import{b as g,u}from"./bagApiSlice-ZNHpXZS5.js";import{c as f}from"./productsApiSlice-C1zCf8O4.js";import{a as j}from"./index-C-vNEGaS.js";import{S as y}from"./sweetalert2.all-mF0vAFOJ.js";import{C as b}from"./CheckoutSteps-cayYj5-x.js";import"./iconBase-wTF-khsr.js";const N=({product:t,refetch:r})=>{const{data:s,isLoading:o,error:l}=f(t.product),[i]=g(),n=async x=>{y.fire({title:"Are you sure?",text:"Do you want to remove the item from bag?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove it!",cancelButtonText:"No, keep it",width:"300px"}).then(async p=>{var c;if(p.isConfirmed)try{const a=await i(x).unwrap();d.success(a.message),r()}catch(a){d.error(((c=a==null?void 0:a.data)==null?void 0:c.message)||(a==null?void 0:a.error))}})};return e.jsx(e.Fragment,{children:o?e.jsx("div",{className:"font-bold",children:"Loading..."}):l?e.jsx("p",{className:"text-xl font-bold text-center mt-4",children:l.data.message}):e.jsxs("div",{className:"flex items-center p-2 border rounded shadow-sm relative sm:p-1",children:[e.jsx(m,{to:`/product/${t.product}`,className:"w-28 h-28 sm:w-24 sm:h-24",children:e.jsx("img",{src:s.image1,alt:"img",className:"w-full h-full hover:cursor-pointer"})}),e.jsxs("div",{className:"ml-4 w-full sm:ml-2",children:[e.jsx("p",{className:"font-bold sm:text-sm",children:s.brand}),e.jsx(m,{to:`/product/${t.product}`,children:e.jsx("p",{className:"font-light line-clamp-1 sm:text-sm w-fit cursor-pointer hover:font-normal",children:s.name})}),e.jsxs("p",{className:"text-sm font-light text-gray-400 sm:text-xs",children:["Sold by: ",s.seller]}),e.jsxs("div",{className:"flex items-center gap-x-4 mt-2 sm:gap-x-2",children:[e.jsxs("p",{className:"px-1 py-0.5 bg-gray-200 rounded-sm font-bold text-sm sm:text-xs",children:["Size: ",t.size.toUpperCase()]}),e.jsxs("p",{className:"px-1 py-0.5 bg-gray-200 rounded-sm font-bold text-sm sm:text-xs",children:["Qty: ",t.quantity]})]}),e.jsxs("div",{className:"flex gap-x-2 items-center text-sm mt-2",children:[e.jsxs("span",{className:"font-bold",children:["रु ",s.sellingPrice]}),e.jsxs("span",{className:"line-through text-gray-500",children:["रु ",s.actualPrice]}),e.jsxs("span",{className:"text-orange-400",children:[s.off,"% OFF"]})]})]}),e.jsx(j,{className:"absolute top-2 right-2 text-gray-500 cursor-pointer sm:top-1 sm:right-1",size:25,onClick:()=>n(t.product)})]})})},F=()=>{const t=h(),{data:r,isLoading:s,error:o,refetch:l}=u(),i=()=>{t("/address",{state:{fromBag:!0}})};return e.jsx("div",{children:s?e.jsx("div",{className:"text-center mt-4 font-bold",children:"Loading your bag..."}):o?e.jsx("p",{className:"text-xl font-bold text-center mt-4",children:o.data.message}):e.jsxs(e.Fragment,{children:[e.jsx(b,{step1:!0}),e.jsxs("div",{className:"p-10 flex items-start justify-between gap-x-4 md:flex-col md:gap-y-8 md:px-20 sm:px-2",children:[e.jsx("div",{className:"flex flex-col w-2/3 gap-y-4 md:w-full",children:r.products.map(n=>e.jsx(N,{product:n,refetch:l},n.product))}),e.jsxs("div",{className:"w-1/3 border px-4 py-6 rounded md:w-full",children:[e.jsxs("p",{className:"flex text-gray-500 font-bold mb-6",children:["PRICE DETAILS ",e.jsxs("span",{children:[" (",r.products.length," items)"]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"my-2 flex justify-between text-gray-500",children:["Total MRP ",e.jsxs("span",{children:["रु ",r.itemPrice]})]}),e.jsxs("p",{className:"mt-2 flex justify-between text-gray-500",children:["Shipping Price ",e.jsxs("span",{children:["रु ",r.shippingPrice]})]}),e.jsx("p",{className:"text-xs mb-2 font-thin text-gray-500",children:"shipping is free of cost for total mrp over रु 4000"}),e.jsx("hr",{className:"h-px my-4 border-0 dark:bg-gray-300"}),e.jsxs("p",{className:"my-2 text-lg font-bold text-gray-600 flex justify-between",children:["Total Amount ",e.jsxs("span",{children:["रु ",r.totalPrice]})]})]}),e.jsx("button",{className:"bg-[#FF3E6B] w-full text-center py-3 text-white font-bold rounded mt-4 text-sm cursor-pointer hover:bg-[#f46486]",onClick:i,children:"PROCEED TO CHECKOUT"})]})]})]})})};export{F as default};
