import{r as h,j as e,L as x,B as j}from"./index-Dn45rCbr.js";import{f as w,g as A}from"./userApiSlice-BcONqH5P.js";import{d as o,F as c,b as D,c as F}from"./index-Va4Lcz8a.js";import{S as l}from"./Skeleton-9Y7E4ClX.js";import"./iconBase-wTF-khsr.js";const C=()=>{var m;const[i,p]=h.useState(""),[a,u]=h.useState("all"),{data:n,isLoading:N,error:t,refetch:b}=w(),[f,{isLoading:g}]=A(),v=async s=>{var d;if(window.confirm("Are you sure you want to delete the user?"))try{await f(s).unwrap(),b(),j.success("User deleted")}catch(r){j.error(((d=r==null?void 0:r.data)==null?void 0:d.message)||r.error)}},y=n==null?void 0:n.filter(s=>{const d=s.name.toLowerCase().includes(i.toLowerCase())||s.phone.includes(i),r=a==="all"||a==="admin"&&s.isAdmin||a==="vendor"&&s.isVendor||a==="deliveryPartner"&&s.isDeliveryPartner;return d&&r});return e.jsxs("div",{className:"py-14 flex flex-col items-center w-[75%] md:w-full p-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"All Users"}),e.jsxs("div",{className:"flex my-4 w-full justify-around",children:[e.jsx("input",{type:"text",placeholder:"Search by name or phone",className:"border p-2 mr-4 rounded w-1/2 xsm:placeholder:text-xs",value:i,onChange:s=>p(s.target.value)}),e.jsxs("select",{className:"border p-2 rounded",value:a,onChange:s=>u(s.target.value),children:[e.jsx("option",{value:"all",children:"All Users"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"vendor",children:"Vendors"}),e.jsx("option",{value:"deliveryPartner",children:"Delivery Partners"})]})]}),g&&e.jsx("p",{className:"text-lg font-semibold",children:"Deleting user..."}),N?e.jsxs("div",{className:"flex flex-col gap-y-2 w-[75%] md:w-full",children:[e.jsx(l,{height:50}),e.jsx(l,{height:50}),e.jsx(l,{height:50}),e.jsx(l,{height:50}),e.jsx(l,{height:50})]}):t?e.jsx("p",{children:(m=t==null?void 0:t.data)==null?void 0:m.meesage}):e.jsxs("table",{className:"w-5/6 bg-gray-50 border border-collapse mt-4 md:w-full md:text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2",children:"Name"}),e.jsx("th",{className:"border p-2",children:"Phone"}),e.jsx("th",{className:"border p-2 sm:hidden",children:"Admin"}),e.jsx("th",{className:"border p-2 md:hidden",children:"Vendor"}),e.jsx("th",{className:"border p-2 md:hidden",children:"Delivery Partner"})]})}),e.jsx("tbody",{children:y.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"border p-2 overflow-hidden whitespace-nowrap text-ellipsis w-auto hover:underline hover:text-blue-800",children:e.jsx(x,{to:`/admin/user/${s._id}`,children:s.name})}),e.jsx("td",{className:"border p-2",children:s.phone}),e.jsx("td",{className:"border p-2 sm:hidden",children:s.isAdmin?e.jsx(o,{size:24,className:"text-green-500"}):e.jsx(c,{size:24,className:" text-red-700"})}),e.jsx("td",{className:"border p-2 md:hidden",children:s.isVendor?e.jsx(o,{size:24,className:"text-green-500"}):e.jsx(c,{size:24,className:" text-red-700"})}),e.jsx("td",{className:"border p-2 md:hidden",children:s.isDeliveryPartner?e.jsx(o,{size:24,className:"text-green-500"}):e.jsx(c,{size:24,className:" text-red-700"})}),e.jsxs("td",{className:"border py-2 pl-6 pr-0 ",children:[e.jsx(x,{to:`/admin/user/${s._id}/edit`,children:e.jsx("button",{className:"mr-4 sm:mr-1",children:e.jsx(D,{color:"blue"})})}),e.jsx("button",{className:"ml-4 sm:ml-1",onClick:()=>v(s._id),children:e.jsx(F,{style:{color:"red"}})})]})]},s._id))})]})]})};export{C as default};
