import{d as v,a as R,j as e,e as D,r as c,L as h}from"./index-Dn45rCbr.js";import{a as L}from"./productsApiSlice-C1zCf8O4.js";import{l as u,S as k,P as E,D as F,a as U}from"./PriceRangeFilter-CjPCELNG.js";import{S as $}from"./SkeletonProductCard-Bjfoeuia.js";import{c as T}from"./categoriesData-CWHIy4Sq.js";import H from"./Footer-0xH4IW5j.js";import{D as i}from"./Divider-Dc33vHdl.js";import"./use-resolved-styles-api-D8N6H6Ns.js";import"./Skeleton-9Y7E4ClX.js";import"./CloseButton-BFRpwHX3.js";import"./use-media-query-jqO5_DAj.js";import"./UnstyledButton-BWqOA1Vn.js";import"./embla-carousel-autoplay.esm-QaDXfp93.js";import"./create-safe-context-91HhculZ.js";import"./index-CWHWfCTA.js";import"./iconBase-wTF-khsr.js";import"./wishlistApiSlice-CuyAJLJs.js";import"./index-Va4Lcz8a.js";const A=()=>{const{primary:n,secondary:m}=v(),l=R(),r=(a=>a.replace(/-/g," ").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "))(n),x=Object.keys(T[r]||{}),o=a=>{const t=a.target.value;l(`/${n}/${t.replace(/ /g,"-").toLowerCase()}`)};return e.jsx("div",{className:"flex flex-col space-y-2 mt-4 gap-y-1 px-4",children:x.map(a=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"subcategory",value:a,checked:m.toLowerCase()===a.replace(/ /g,"-").toLowerCase(),onChange:o,className:"form-radio text-blue-500"}),e.jsx("span",{className:"text-sm font-bold",children:a})]},a))})},ae=()=>{var b,y,C;const[n,m]=D(),[l,j]=c.useState(n.get("sort")||"recommended"),[r,x]=c.useState(((b=n.get("discounts"))==null?void 0:b.split(","))||[]),[o,a]=c.useState(((y=n.get("priceRanges"))==null?void 0:y.split(","))||[]),{primary:t,secondary:p}=v(),{data:d,error:g,isLoading:f}=L({primary:t,secondary:p,sort:l,discounts:r.join(","),priceRanges:o.join(",")}),N=c.useCallback(u.debounce(s=>j(s),300),[]),P=c.useCallback(u.debounce(s=>{x(s)},300),[]),S=c.useCallback(u.debounce(s=>{a(s)},300),[]);return c.useEffect(()=>{const s=new URLSearchParams;l!=="recommended"&&s.set("sort",l),r.length>0&&s.set("discounts",r.join(",")),o.length>0&&s.set("priceRanges",o.join(",")),m(s)},[l,r,o,m]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pb-4",children:[e.jsxs("div",{className:"p-4",children:[e.jsx(h,{to:"/",className:"text-sm font-normal hover:underline",children:"HOME"})," / ",e.jsx(h,{to:`/${t}`,className:"text-sm hover:underline",children:t.replace(/-/g," ").toUpperCase()})," / ",e.jsx(h,{to:`/${t}/${p}`,className:"text-sm font-bold hover:underline",children:p.replace(/-/g," ").toUpperCase()}),e.jsxs("h2",{className:"font-bold mt-4",children:[p.replace(/-/g," ").toUpperCase()," -"," ",e.jsxs("span",{className:"text-gray-500 font-light mt-4",children:[d&&d.length," items"]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx("h2",{className:"font-bold",children:"FILTERS"}),e.jsx(k,{data:[{value:"recommended",label:"Recommended"},{value:"new",label:"What's New"},{value:"discount",label:"Better Discount"},{value:"rating",label:"Top Rated"},{value:"pl2h",label:"Price: Low To High"},{value:"ph2l",label:"Price: High To Low"}],defaultValue:"recommended",allowDeselect:!1,onChange:N})]})]}),e.jsx(i,{}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-[15%] sm:hidden",children:[e.jsx(A,{}),e.jsx(i,{my:"lg"}),e.jsx(E,{selectedPriceRanges:o,onPriceRangeChange:S}),e.jsx(i,{my:"lg"}),e.jsx(F,{selectedDiscounts:r,onDiscountChange:P}),e.jsx(i,{mt:"lg"})]}),e.jsx(i,{className:"h-auto",orientation:"vertical"}),e.jsxs("div",{className:"w-[85%] sm:w-full",children:[f&&e.jsx("div",{className:"grid grid-cols-5 gap-x-10 p-10 gap-y-8 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:p-3 sm:gap-x-4 xsm:grid-cols-1",children:Array.from({length:10}).map((s,w)=>e.jsx($,{},w))}),g&&e.jsxs("p",{className:"text-xs font-semibold",children:["Error: ",(C=g==null?void 0:g.data)==null?void 0:C.message]}),e.jsx("div",{children:d&&d.length>0?e.jsx(U,{product:d}):!f&&e.jsx("p",{className:"text-center mt-4 border rounded px-20 font-bold bg-red-300 py-2 w-fit mx-auto mb-2",children:"No products found."})}),e.jsx(i,{})]})]})]}),e.jsx(H,{})]})};export{ae as default};
