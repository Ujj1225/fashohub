import{r,a as w,u as y,c as C,j as s,N,s as S,B as i}from"./index-Dn45rCbr.js";import{c as E,a as R}from"./userApiSlice-BcONqH5P.js";const q=()=>{const[l,d]=r.useState(""),[n,c]=r.useState(60),[I,m]=r.useState(!1),f=w(),p=y(),[h,{isLoading:x}]=E(),[g]=R(),o=C();if(!o.state||!o.state.fromSignUp)return s.jsx(N,{to:"/signup"});const{name:b,password:v,phone:u}=o.state;r.useEffect(()=>{let e=null;return n>0?e=setInterval(()=>{c(t=>t-1)},1e3):n===0&&e&&clearInterval(e),()=>{e&&clearInterval(e)}},[n]);const F=async e=>{var t;e.preventDefault();try{const a=await h({name:b,phone:u,password:v,otp:l}).unwrap();p(S({...a})),f("/"),i.success("User registered successfully.")}catch(a){i.error(((t=a==null?void 0:a.data)==null?void 0:t.message)||(a==null?void 0:a.error))}},j=async()=>{var e;try{await g({phone:u}).unwrap(),m(!0),c(60)}catch(t){i.error(((e=t==null?void 0:t.data)==null?void 0:e.message)||(t==null?void 0:t.error))}};return s.jsx("div",{className:"hero bg-[#FCEEEA] flex justify-center items-center p-5 min-h-[91vh]",children:s.jsx("div",{className:"form-page bg-white rounded-lg shadow-lg p-8 max-w-md w-full mt-[-10rem]",children:s.jsxs("div",{className:"ml-4",children:[s.jsx("h4",{className:"mb-4 font-semibold text-xl text-center",children:"Verify Your Phone Number"}),s.jsxs("form",{onSubmit:F,children:[s.jsx("input",{type:"text",name:"otp",placeholder:"Verification Code",value:l,onChange:e=>d(e.target.value),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg mb-4 focus:outline-none focus:border-[#FF3F6C]",maxLength:"6"}),s.jsx("button",{type:"submit",className:"bg-[#FF3F6C] w-full h-8 text-white font-bold rounded-lg mb-4",disabled:x,children:"VERIFY"})]}),n>0?s.jsxs("p",{className:"text-center text-[#FF3F6C] font-semibold",children:["Resend code in ",n," seconds"]}):s.jsx("button",{onClick:j,className:"text-[#FF3F6C] font-semibold cursor-pointer w-full",children:"Resend Code"})]})})})};export{q as default};
