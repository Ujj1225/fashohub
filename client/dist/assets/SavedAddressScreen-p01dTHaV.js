import{r as a,j as e,B as n}from"./index-Dn45rCbr.js";import{u as F,a as $,b as q}from"./deliveryApiSlice-DvahbnS8.js";import U from"./Footer-0xH4IW5j.js";import"./index-Va4Lcz8a.js";import"./iconBase-wTF-khsr.js";const R=()=>{const[i,o]=a.useState(""),[c,x]=a.useState(""),[u,m]=a.useState(""),[p,b]=a.useState(""),[h,g]=a.useState(""),[f,y]=a.useState(""),[d,w]=a.useState(!1),[v,L]=a.useState(!0),[N,S]=a.useState(!1),{data:r,refetch:j}=F(),[C,{isLoading:A}]=$(),[E,{isLoading:k}]=q(),D=async s=>{var l;s.preventDefault();try{await C({province:i,district:c,area:u,landmark:p,description:h,email:f}).unwrap(),j(),n.success("Address saved successfully.")}catch(t){n.error(((l=t==null?void 0:t.data)==null?void 0:l.message)||t.error)}};a.useEffect(()=>{r&&(o(r.province),x(r.district),m(r.area),b(r.landmark),g(r.description),y(r.email),w(!0),L(!1))},[r]);const B=async s=>{var l;s.preventDefault();try{await E({province:i,district:c,area:u,landmark:p,description:h,email:f}).unwrap(),j(),j(),n.success("Address updated successfully."),o(""),x(""),m(""),b(""),g(""),y(""),S(!1)}catch(t){n.error(((l=t==null?void 0:t.data)==null?void 0:l.message)||t.error)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-16 pt-8 sm:p-4",children:e.jsxs("form",{className:"flex flex-col items-center justify-center border w-fit mx-auto px-10 py-6 sm:px-4 rounded-sm shadow-lg",children:[e.jsx("h1",{className:"font-bold text-2xl text-gray-600 mb-6",children:"Your Address"}),e.jsxs("div",{className:"flex flex-col gap-x-3 mb-4",children:[e.jsx("label",{className:"text-gray-500",children:"Province *"}),e.jsx("input",{type:"text",className:"border border-gray-600 rounded-sm w-96 py-1 px-3 sm:w-60",required:!0,value:i,onChange:s=>o(s.target.value),disabled:d,maxLength:"20"})]}),e.jsxs("div",{className:"flex flex-col gap-x-3 mb-4",children:[e.jsx("label",{className:"text-gray-500",children:"District *"}),e.jsx("input",{type:"text",className:"border border-gray-600 rounded-sm w-96 py-1 px-3 sm:w-60",required:!0,value:c,onChange:s=>x(s.target.value),disabled:d,maxLength:"20"})]}),e.jsxs("div",{className:"flex flex-col gap-x-3 mb-4",children:[e.jsx("label",{className:"text-gray-500",children:"Area/Locality *"}),e.jsx("input",{type:"text",className:"border border-gray-600 rounded-sm w-96 py-1 px-3 sm:w-60",required:!0,value:u,onChange:s=>m(s.target.value),disabled:d,maxLength:"40"})]}),e.jsxs("div",{className:"flex flex-col gap-x-3 mb-4",children:[e.jsx("label",{className:"text-gray-500",children:"Nearest Landmark"}),e.jsx("input",{type:"text",className:"border border-gray-600 rounded-sm w-96 py-1 px-3 sm:w-60",value:p,onChange:s=>b(s.target.value),disabled:d,maxLength:"40"})]}),e.jsxs("div",{className:"flex flex-col gap-x-3 mb-4",children:[e.jsx("label",{className:"text-gray-500",children:"Additional Description"}),e.jsx("textarea",{rows:3,type:"text",className:"border border-gray-600 rounded-sm w-96 py-1 px-3 sm:w-60",value:h,onChange:s=>g(s.target.value),disabled:d,maxLength:"100"})]}),e.jsxs("div",{className:"flex flex-col gap-x-3 mb-4",children:[e.jsx("label",{className:"text-gray-500",children:"Email *"}),e.jsx("input",{type:"email",className:"border border-gray-600 rounded-sm w-96 py-1 px-3 sm:w-60",required:!0,value:f,onChange:s=>y(s.target.value),disabled:d,maxLength:"40"})]}),e.jsx("button",{type:"submit",className:`bg-[#FF3E6B] w-full py-2 rounded-sm text-white font-bold hover:bg-[#f46486] ${v?"block":"hidden"}`,onClick:D,disabled:A,children:A?"Saving...":"Save"}),e.jsxs("span",{className:`text-base font-semibold text-gray-600 mb-4 ${N?"hidden":"block"} ${v?"hidden":"block"}`,children:["To edit address, click"," ",e.jsx("span",{className:"text-blue-600 underline cursor-pointer hover:text-blue-400",onClick:()=>{S(!0),w(!1)},children:"here"})]}),e.jsx("button",{type:"submit",className:`bg-[#FF3E6B] w-full py-2 rounded-sm text-white font-bold hover:bg-[#f46486] ${N?"block":"hidden"} ${v?"hidden":"block"}`,disabled:k,onClick:B,children:k?"Updating...":"Update"})]})}),e.jsx(U,{})]})};export{R as default};
