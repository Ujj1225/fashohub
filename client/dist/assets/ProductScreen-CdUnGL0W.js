import{j as e,L as p,r as f,B as g,d as M,a as A,b as F}from"./index-Dn45rCbr.js";import{i as D,c as H}from"./productsApiSlice-C1zCf8O4.js";import{G as y}from"./iconBase-wTF-khsr.js";import{b as T}from"./index-CWHWfCTA.js";import{a as W,b as $}from"./wishlistApiSlice-CuyAJLJs.js";import{a as O}from"./bagApiSlice-ZNHpXZS5.js";import{P as _,a as U}from"./ProductReviews-4kXrtpnK.js";import{a as G}from"./vendorApiSlice-BCrYRZwa.js";import{u as S,M as k}from"./Modal-1q3nvwzu.js";import{S as Q}from"./Skeleton-9Y7E4ClX.js";import{e as V}from"./index-Va4Lcz8a.js";import"./Divider-Dc33vHdl.js";import"./use-resolved-styles-api-D8N6H6Ns.js";import"./create-safe-context-91HhculZ.js";import"./CloseButton-BFRpwHX3.js";import"./use-media-query-jqO5_DAj.js";import"./UnstyledButton-BWqOA1Vn.js";function Z(s){return y({tag:"svg",attr:{viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z",clipRule:"evenodd"},child:[]}]})(s)}function q(s){return y({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 448l-30.164-27.211C118.718 322.442 48 258.61 48 179.095 48 114.221 97.918 64 162.4 64c36.399 0 70.717 16.742 93.6 43.947C278.882 80.742 313.199 64 349.6 64 414.082 64 464 114.221 464 179.095c0 79.516-70.719 143.348-177.836 241.694L256 448z"},child:[]}]})(s)}function K(s){return y({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 372.686L380.83 448l-33.021-142.066L458 210.409l-145.267-12.475L256 64l-56.743 133.934L54 210.409l110.192 95.525L131.161 448z"},child:[]}]})(s)}const Y=({product:s})=>e.jsxs("div",{className:"mb-4 sm:text-xs",children:[e.jsx(p,{to:"/",className:"text-sm font-normal hover:underline",children:"HOME"})," / ",e.jsx(p,{to:`/${s.primaryCategory}`,className:"text-sm hover:underline",children:s.primaryCategory.replace(/-/g," ").toUpperCase()})," / ",e.jsx(p,{to:`/${s.primaryCategory}/${s.secondaryCategory}`,className:"text-sm hover:underline",children:s.secondaryCategory.replace(/-/g," ").toUpperCase()})," / ",e.jsx(p,{to:`/${s.primaryCategory}/${s.secondaryCategory}/${s.tertiaryCategory}`,className:"text-sm hover:underline",children:s.tertiaryCategory.replace(/-/g," ").toUpperCase()})," > ",e.jsx(p,{to:`/product/${s._id}`,className:"text-sm font-bold hover:underline",children:s.name.replace(/-/g," ").toUpperCase()})]}),J=({product:s})=>e.jsxs("div",{className:`grid gap-2 ${s.image2?"w-3/5 grid-cols-2 lg:w-1/2 sm:w-full":"w-[30%] sm:w-fit"}`,children:[e.jsx("div",{className:"h-[530px] lg:h-[400px] overflow-hidden relative group",children:e.jsx("img",{src:s.image1,alt:"image1",className:"h-full transition-transform duration-300 ease-in-out transform group-hover:scale-105 z-10 group-hover:z-20"})}),s.image2&&e.jsx("div",{className:"h-[530px] lg:h-[400px] overflow-hidden relative group",children:e.jsx("img",{src:s.image2,alt:"image2",className:"h-full transition-transform duration-300 ease-in-out transform group-hover:scale-105 z-10 group-hover:z-20"})}),s.image3&&e.jsx("div",{className:"h-[530px] lg:h-[400px] overflow-hidden relative group",children:e.jsx("img",{src:s.image3,alt:"image3",className:"h-full transition-transform duration-300 ease-in-out transform group-hover:scale-105 z-10 group-hover:z-20"})}),s.image4&&e.jsx("div",{className:"h-[530px] lg:h-[400px] overflow-hidden relative group",children:e.jsx("img",{src:s.image4,alt:"image4",className:"h-full transition-transform duration-300 ease-in-out transform group-hover:scale-105 z-10 group-hover:z-20"})}),s.image5&&e.jsx("div",{className:"h-[530px] lg:h-[400px] overflow-hidden relative group",children:e.jsx("img",{src:s.image5,alt:"image5",className:"h-full transition-transform duration-300 ease-in-out transform group-hover:scale-105 z-10 group-hover:z-20"})}),s.image6&&e.jsx("div",{className:"h-[530px] lg:h-[400px] overflow-hidden relative group",children:e.jsx("img",{src:s.image6,alt:"image6",className:"h-full transition-transform duration-300 ease-in-out transform group-hover:scale-105 z-10 group-hover:z-20"})})]}),X=({product:s})=>{const[o,{open:n,close:i}]=S(!1),{data:l,isLoading:d}=G(s.user);return e.jsxs("div",{className:"mt-4",children:[e.jsx(k,{opened:o,onClose:i,title:"Seller Information",styles:{title:{fontWeight:700,fontSize:"1.5rem"}},children:d?e.jsx(Q,{height:400}):l?e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsxs("p",{className:"flex flex-col font-bold",children:["Name:"," ",e.jsx("span",{className:"text-gray-600 font-medium",children:l.name})]}),e.jsxs("p",{className:"flex flex-col font-bold",children:["Location:"," ",e.jsx("span",{className:"text-gray-600 font-medium",children:l.location})]}),e.jsxs("p",{className:"flex flex-col font-bold",children:["Contact:"," ",e.jsx("span",{className:"text-gray-600 font-medium",children:l.contact})]}),e.jsxs("p",{className:"flex flex-col font-bold",children:["Description:"," ",e.jsx("span",{className:"text-gray-600 font-medium",children:l.name})]}),e.jsx("p",{className:"flex flex-col font-bold text-[#FF3E6B]",children:"email@email.com | +977 98400112233"})]}):e.jsx("p",{children:"Information about seller currently unavailable."})}),e.jsxs("div",{children:["Seller:"," ",e.jsx("span",{className:"font-bold text-[#FF3E6B] hover:cursor-pointer",onClick:n,children:(l==null?void 0:l.name)||s.seller})," "]})]})};function ee(s){return y({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M2 8C2 7.44772 2.44772 7 3 7H21C21.5523 7 22 7.44772 22 8C22 8.55228 21.5523 9 21 9H3C2.44772 9 2 8.55228 2 8Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M2 12C2 11.4477 2.44772 11 3 11H21C21.5523 11 22 11.4477 22 12C22 12.5523 21.5523 13 21 13H3C2.44772 13 2 12.5523 2 12Z",fill:"currentColor"},child:[]},{tag:"path",attr:{d:"M3 15C2.44772 15 2 15.4477 2 16C2 16.5523 2.44772 17 3 17H15C15.5523 17 16 16.5523 16 16C16 15.4477 15.5523 15 15 15H3Z",fill:"currentColor"},child:[]}]})(s)}const se=s=>{const o=s.split(`
`),n=[];return o.forEach((i,l)=>{i.startsWith("#")?n.push(e.jsx("div",{className:"text-sm font-bold mt-3",children:i.substring(1).trim().toUpperCase()},l)):i.startsWith("-")?n.push(e.jsx("ul",{className:"list-disc px-6 font-light",children:e.jsx("li",{children:i.substring(2).trim()})},l)):n.push(e.jsx("p",{className:"text-base font-light",children:i},l))}),n},te=({product:s})=>e.jsxs("div",{className:"mt-4",children:[e.jsxs("h2",{className:"flex items-center gap-2 text-base font-bold",children:["PRODUCT DESCRIPTION"," ",e.jsx(ee,{size:15,className:"border border-black p-[1px] rounded-sm"})]}),e.jsx("div",{className:"",children:se(s.description)})]}),ae=({productId:s,productRefetch:o})=>{const[n,{open:i,close:l}]=S(!1),[d,j]=f.useState(5),[v,C]=f.useState(""),[b,{isLoading:N}]=D(),t=async m=>{var x;m.preventDefault(),l();try{await b({productId:s,rating:d,comment:v}).unwrap(),g.success("Product successfully reviewed."),o()}catch(c){g.error(((x=c==null?void 0:c.data)==null?void 0:x.message)||(c==null?void 0:c.error))}};return e.jsxs("div",{children:[e.jsxs(k,{opened:n,onClose:l,title:"Write A Review",children:[e.jsx("h2",{className:"font-bold text-sm",children:"Select Rating"}),e.jsxs("form",{className:"flex flex-col",onSubmit:t,children:[e.jsxs("select",{name:"rating",value:d,onChange:m=>j(Number(m.target.value)),className:"border rounded px-2 py-1",required:!0,children:[e.jsx("option",{value:"5",children:"5 - Excellent"}),e.jsx("option",{value:"4",children:"4 - Very Good"}),e.jsx("option",{value:"3",children:"3 - Average"}),e.jsx("option",{value:"2",children:"2 - Poor"}),e.jsx("option",{value:"1",children:"1 - Terrible"})]}),e.jsx("h2",{className:"font-bold text-sm mt-2",children:"Write a Review"}),e.jsx("textarea",{name:"comment",rows:"4",className:"border px-2 py-1 rounded",placeholder:"Leave a review...",value:v,onChange:m=>C(m.target.value),required:!0,maxLength:200}),e.jsx("button",{type:"submit",className:"mt-2 border py-1 px-2 rounded bg-[#FF3E6B] text-white font-bold",children:N?"Writing...":"Submit"})]})]}),e.jsxs("button",{className:"flex items-center gap-x-2 border py-0.5 px-2 text-gray-600 rounded border-gray-300 hover:border-black mt-2",onClick:i,children:["Leave a Review... ",e.jsx(V,{})]})]})},re=({product:s})=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold text-2xl leading-6 md:text-xl",children:s.brand}),e.jsx("p",{className:"text-gray-500 font-light text-xl mt-1 md:text-lg",children:s.name}),s.numReviews>0&&e.jsx("a",{href:"#ratings_reviews",children:e.jsxs("div",{className:"flex gap-1 border w-fit px-2 py-1 mt-2 rounded-sm text-base cursor-pointer hover:border-black",children:[e.jsxs("span",{className:"flex items-center gap-1 font-bold",children:[s.rating.toFixed(1)," ",e.jsx(K,{color:"grey",size:20})]}),"|",e.jsx("span",{className:"font-light text-gray-600",children:s.numReviews>=1e3?e.jsx(e.Fragment,{children:s.numReviews/1e3+"K"}):e.jsx(e.Fragment,{children:s.numReviews})})]})}),e.jsx("hr",{className:"h-px my-3 bg-gray-200 border-0 dark:bg-gray-300"}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("p",{className:"text-2xl font-bold leading-6 md:text-xl",children:["रु ",s.sellingPrice]}),e.jsxs("p",{className:"text-xl leading-6 font-light ml-3 text-gray-600 md:text-lg",children:["MRP",e.jsxs("span",{className:"line-through ml-1",children:["रु",s.actualPrice]})]}),e.jsxs("p",{className:"ml-3 font-bold text-xl text-orange-400 md:text-lg",children:["(",s.off,"% OFF)"]})]})]}),ye=()=>{var w,z;const{id:s}=M(),o=A(),{userInfo:n}=F(a=>a.auth),[i,l]=f.useState(""),[d,j]=f.useState(1),[v,{isLoading:C}]=O(),[b,N]=f.useState(!1),{data:t,isLoading:m,error:x,refetch:c}=H(s),[L,{isLoading:P}]=W(),{data:u,refetch:R}=$(t==null?void 0:t._id,{skip:!(t!=null&&t._id)}),B=a=>{l(a),j(1)},I=async a=>{var h;if(!n){o(`/login?redirect=/product/${a}`);return}try{const r=await L(a).unwrap();R(),g.success(r.message)}catch(r){console.log(r),g.error(((h=r==null?void 0:r.data)==null?void 0:h.message)||(r==null?void 0:r.error))}},E=async a=>{var h;if(!n){o(`/login?redirect=/product/${a}`);return}if(t.sizes.filter(r=>r.size).length>0&&!i){g.error("Please select a size before adding to the bag.");return}try{const r=await v({pid:a,size:i,quantity:d}).unwrap();g.success(r.message)}catch(r){g.error(((h=r==null?void 0:r.data)==null?void 0:h.message)||(r==null?void 0:r.error))}};return f.useEffect(()=>{t&&t.sizes.filter(a=>a.size).length===0?N(!0):N(!1)},[t]),e.jsx("div",{children:m?e.jsx("p",{className:"text-sm font-bold text-center mt-4",children:"Loading Product Details..."}):x?e.jsxs("p",{className:"text-sm font-bold text-center mt-4",children:["Error loading product: ",(w=x==null?void 0:x.data)==null?void 0:w.message]}):e.jsxs("div",{className:"p-4 sm:p-2",children:[e.jsx(Y,{product:t}),e.jsxs("div",{className:"flex items-start justify-center sm:flex-col",children:[e.jsx(J,{product:t}),e.jsxs("div",{className:`px-4 sm:px-0 sm:w-full sm:mt-4 ${t.image2?"w-2/5 lg:w-1/2":"w-[70%]"}`,children:[e.jsx(re,{product:t}),t.sizes.filter(a=>a.size).length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"font-bold text-base",children:"SELECT SIZE"}),e.jsx("div",{className:"grid grid-cols-8 w-fit gap-2 mt-2 md:grid-cols-4 sm:grid-cols-5",children:t.sizes.filter(a=>a.size).map((a,h)=>e.jsx("div",{children:e.jsx("button",{className:`border rounded-full w-12 h-12 flex items-center justify-center ${i===a.size?"border-black bg-gray-100":"border-gray-300 bg-gray-50"}`,onClick:()=>B(a.size),children:a.size.toUpperCase()})},h))}),i&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"font-bold text-base",children:"SELECT QUANTITY"}),e.jsx("select",{value:d,onChange:a=>j(Number(a.target.value)),className:"mt-2 border border-gray-300 rounded-md w-20 h-8 text-center",children:[...Array((z=t.sizes.find(a=>a.size===i))==null?void 0:z.quantity).keys()].map(a=>e.jsx("option",{value:a+1,children:a+1},a+1))})]})]}),b&&e.jsx("p",{className:"my-8 border w-fit p-2 rounded bg-red-600 text-white font-bold",children:"Product is Out of Stock"}),e.jsxs("div",{className:"mt-4 flex items-center gap-2 sm:justify-around",children:[e.jsxs("button",{className:"flex items-center gap-2 px-20 py-4 bg-[#FF3E6B] text-white font-bold text-base rounded-md hover:bg-[#f46486] xl:px-10 md:px-4 md:py-2 sm:text-sm sm:px-3 sm:py-1.5",onClick:()=>E(t._id),disabled:b,children:[e.jsx(Z,{size:25,className:"sm:size-6"})," ",C?"Adding to bag...":"ADD TO BAG"]}),e.jsxs("button",{className:`flex items-center gap-2 px-10 py-4 font-bold text-base rounded-md border md:px-4 md:py-2 sm:text-sm sm:px-3 sm:py-1.5 ${u&&u.length>0&&u[0].product===t._id?"border-red-500 hover:border-red-300":"border-gray-300 hover:border-black"}`,onClick:()=>I(t._id),children:[u&&u.length>0&&u[0].product===t._id?e.jsx(q,{size:25,className:"sm:size-6",color:"red"}):e.jsx(T,{size:25,className:"sm:size-6"}),P?"Adding...":"WISHLIST"]})]}),e.jsx("hr",{className:"h-px my-3 bg-gray-200 border-0 dark:bg-gray-300"}),e.jsx(te,{product:t}),e.jsx("hr",{className:"h-px my-3 bg-gray-200 border-0 dark:bg-gray-300"}),e.jsx(_,{product:t}),e.jsx("hr",{className:"h-px my-3 bg-gray-200 border-0 dark:bg-gray-300"}),e.jsx(U,{product:t}),n&&e.jsx(ae,{productId:t._id,productRefetch:c}),e.jsx(X,{product:t})]})]})]})})};export{ye as default};
