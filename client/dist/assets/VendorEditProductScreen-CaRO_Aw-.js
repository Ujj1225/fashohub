import{r as t,a as ce,d as me,j as e,B as p}from"./index-Dn45rCbr.js";import{c as x}from"./categoriesData-CWHIy4Sq.js";import{c as ue,d as pe,e as xe}from"./productsApiSlice-C1zCf8O4.js";const je=()=>{var J;const[w,P]=t.useState(""),[L,I]=t.useState(""),[q,j]=t.useState(""),[E,y]=t.useState(""),[z,f]=t.useState(""),[U,v]=t.useState(""),[k,N]=t.useState(""),[R,C]=t.useState(""),[O,D]=t.useState(""),[A,B]=t.useState(""),[T,F]=t.useState(""),[M,Q]=t.useState(""),[G,H]=t.useState(""),[d,W]=t.useState(""),[g,K]=t.useState(""),[V,S]=t.useState(""),[m,h]=t.useState([{size:"",quantity:""}]),X=ce(),{id:Y}=me(),{data:s,isLoading:Z,error:b}=ue(Y),[$,{isLoading:ee}]=pe(),[ae,{isLoading:i}]=xe(),te=()=>{h([...m,{size:"",quantity:""}])},_=(a,n,r)=>{const c=m.map((u,l)=>l===a?{...u,[n]:r}:u);h(c)},se=a=>{const n=m.filter((r,c)=>c!==a);h(n)},re=a=>{W(a.target.value),K(""),S("")},le=a=>{K(a.target.value),S("")},ne=a=>{S(a.target.value)},de=()=>d&&x[d]?Object.keys(x[d]):[],ie=()=>d&&g&&x[d]?x[d][g]:[],oe=async a=>{var n;a.preventDefault();try{await $({id:Y,name:w,brand:L,image1:q,image2:E,image3:z,image4:U,image5:k,image6:R,primaryCategory:d,secondaryCategory:g,tertiaryCategory:V,description:O,sellingPrice:A,actualPrice:T,off:M,sizes:m,seller:G}).unwrap(),p.success("Product Updated"),X("/vendor")}catch(r){p.error(((n=r==null?void 0:r.data)==null?void 0:n.message)||r.error)}};t.useEffect(()=>{s&&(P(s.name||""),I(s.brand||""),j(s.image1||""),y(s.image2||""),f(s.image3||""),v(s.image4||""),N(s.image5||""),C(s.image6||""),D(s.description||""),B(s.sellingPrice||""),F(s.actualPrice||""),Q(s.off||""),h(s.sizes||[{size:"",quantity:""}]),H(s.seller||""))},[s]);const o=async(a,n)=>{var u;const r=a.target.files[0];if(r.size>2e5){p.error("Each image must be less than 200KB");return}const c=new FormData;c.append("image",r);try{const l=await ae(c).unwrap();switch(p.success(l.message),n){case"image1":j(l.image);break;case"image2":y(l.image);break;case"image3":f(l.image);break;case"image4":v(l.image);break;case"image5":N(l.image);break;case"image6":C(l.image);break;default:break}}catch(l){p.error(((u=l==null?void 0:l.data)==null?void 0:u.message)||l.error)}};return e.jsxs("div",{className:"py-14 flex flex-col items-center w-[75%] md:w-full md:px-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Edit Product"}),ee&&e.jsx("p",{className:"text-lg font-medium",children:"Updating product..."}),Z&&e.jsx("p",{className:"text-lg font-medium",children:"Loading product details..."}),b&&e.jsx("p",{className:"text-xs font-thin",children:(J=b==null?void 0:b.data)==null?void 0:J.message}),e.jsxs("form",{className:"bg-gray-50 px-4 py-6 mt-4 rounded-lg shadow-lg w-2/3 md:px-2 md:w-full",onSubmit:oe,children:[e.jsxs("div",{className:"mt-4 mb-2",children:[e.jsxs("p",{children:["Product Name ",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"})]}),e.jsx("input",{type:"text",className:"border border-gray-400 rounded-sm w-full p-1",placeholder:"Enter product name",required:!0,value:w,onChange:a=>P(a.target.value),maxLength:"100"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{children:["Product Brand ",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"})]}),e.jsx("input",{type:"text",className:"border border-gray-400 rounded-sm w-full p-1",placeholder:"Enter product brand",required:!0,value:L,onChange:a=>I(a.target.value),maxLength:"30"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{children:["Images",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"}),e.jsx("span",{className:"ml-1 text-xs font-light italic",children:"Atleast 1, atmost 6. Each image shall be maximum of 200kb"})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Image1 URL (Required)",value:q,onChange:a=>j(a.target.value),className:"px-2 py-1 border mb-0 mt-4",disabled:!0}),e.jsx("input",{type:"file",onChange:a=>o(a,"image1")}),i&&e.jsx("p",{className:"text-xs font-thin",children:"Loading..."})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Image2 URL (Optional)",value:E,onChange:a=>y(a.target.value),className:"px-2 py-1 border mb-0 mt-4",disabled:!0}),e.jsx("input",{type:"file",onChange:a=>o(a,"image2")}),i&&e.jsx("p",{className:"text-xs font-thin",children:"Loading..."})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Image3 URL (Optional)",value:z,onChange:a=>f(a.target.value),className:"px-2 py-1 border mb-0 mt-4",disabled:!0}),e.jsx("input",{type:"file",onChange:a=>o(a,"image3")}),i&&e.jsx("p",{className:"text-xs font-thin",children:"Loading..."})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Image4 URL (Optional)",value:U,onChange:a=>v(a.target.value),className:"px-2 py-1 border mb-0 mt-4",disabled:!0}),e.jsx("input",{type:"file",onChange:a=>o(a,"image4")}),i&&e.jsx("p",{className:"text-xs font-thin",children:"Loading..."})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Image5 URL (Optional)",value:k,onChange:a=>N(a.target.value),className:"px-2 py-1 border mb-0 mt-4",disabled:!0}),e.jsx("input",{type:"file",onChange:a=>o(a,"image5")}),i&&e.jsx("p",{className:"text-xs font-thin",children:"Loading..."})]}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Image6 URL (Optional)",value:R,onChange:a=>C(a.target.value),className:"px-2 py-1 border mb-0 mt-4",disabled:!0}),e.jsx("input",{type:"file",onChange:a=>o(a,"image6")}),i&&e.jsx("p",{className:"text-xs font-thin",children:"Loading..."})]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{children:["Primary Category"," ",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"})]}),e.jsxs("select",{className:"border border-gray-400 rounded-sm w-full p-1",value:d,onChange:re,required:!0,children:[e.jsx("option",{value:"",children:"Select Primary Category"}),Object.keys(x).map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{children:["Secondary Category",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"})]}),e.jsxs("select",{className:"border border-gray-400 rounded-sm w-full p-1",value:g,onChange:le,required:!0,children:[e.jsx("option",{value:"",children:"Select Secondary Category"}),de().map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{children:["Tertiary Category"," ",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"})]}),e.jsxs("select",{className:"border border-gray-400 rounded-sm w-full p-1",value:V,onChange:ne,required:!0,children:[e.jsx("option",{value:"",children:"Select Tertiary Category"}),ie().map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{children:["Product Description"," ",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"}),e.jsx("span",{className:"ml-1 text-xs font-light italic",children:"You can use # for a title, and -- for bullet points"})]}),e.jsx("textarea",{rows:"4",type:"text",className:"border border-gray-400 rounded-sm w-full p-1",placeholder:"Enter product description",value:O,onChange:a=>D(a.target.value),maxLength:"2000"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{children:["Selling Price (in Rs)"," ",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"})]}),e.jsx("input",{type:"text",className:"border border-gray-400 rounded-sm w-full p-1",placeholder:"Enter selling price",required:!0,value:A,onChange:a=>B(a.target.value),maxLength:"6"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{children:["Actual Price (in Rs)"," ",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"})]}),e.jsx("input",{type:"text",className:"border border-gray-400 rounded-sm w-full p-1",placeholder:"Enter actual price",required:!0,value:T,onChange:a=>F(a.target.value),maxLength:"6"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{children:["Discount Percentage",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"}),e.jsx("span",{className:"ml-1 text-xs font-light italic",children:"Enter simply 25 for 25%"})]}),e.jsx("input",{type:"text",className:"border border-gray-400 rounded-sm w-full p-1",placeholder:"Enter discount percentage",required:!0,value:M,onChange:a=>Q(a.target.value),maxLength:"2"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{children:"Sizes"}),e.jsx("button",{type:"button",className:"bg-blue-700 px-2 py-0.5 ml-4 rounded-full hover:bg-blue-600 text-white font-bold mt-2",onClick:te,children:"+ Add Field"})]}),m.map((a,n)=>e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("input",{type:"text",className:"border border-gray-400 rounded-sm w-1/2 p-1 mr-2",placeholder:"Size",value:a.size,onChange:r=>_(n,"size",r.target.value),maxLength:"4"}),e.jsx("input",{type:"number",className:"border border-gray-400 rounded-sm w-1/4 p-1 mr-2",placeholder:"Quantity",value:a.quantity,onChange:r=>_(n,"quantity",r.target.value),maxLength:"4"}),e.jsx("button",{type:"button",className:"bg-red-600 px-3 py-0.5 rounded-full hover:bg-red-500 text-white font-bold",onClick:()=>se(n),children:"X"})]},n))]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("p",{children:["Shop Name",e.jsx("span",{className:"text-red-600 font-extrabold",children:"*"})]}),e.jsx("input",{type:"text",className:"border border-gray-400 rounded-sm w-full p-1",placeholder:"Enter your shop name",required:!0,value:G,onChange:a=>H(a.target.value),maxLength:"50"})]}),e.jsx("button",{className:"bg-blue-500 px-4 py-1 rounded-lg hover:bg-blue-600 text-white font-bold",children:"Update Product"}),e.jsx("button",{className:"bg-red-500 px-4 py-1 rounded-lg hover:bg-red-600 text-white font-bold ml-4",onClick:()=>{X("/vendor")},children:"Cancel"})]})]})};export{je as default};
