import{d as N,a as D,j as e,e as L,r as c,L as x}from"./index-Dn45rCbr.js";import{b as $}from"./productsApiSlice-C1zCf8O4.js";import{l as f,S as E,P as k,D as F,a as T}from"./PriceRangeFilter-CjPCELNG.js";import{S as U}from"./SkeletonProductCard-Bjfoeuia.js";import{c as H}from"./categoriesData-CWHIy4Sq.js";import A from"./Footer-0xH4IW5j.js";import{D as d}from"./Divider-Dc33vHdl.js";import"./use-resolved-styles-api-D8N6H6Ns.js";import"./Skeleton-9Y7E4ClX.js";import"./CloseButton-BFRpwHX3.js";import"./use-media-query-jqO5_DAj.js";import"./UnstyledButton-BWqOA1Vn.js";import"./embla-carousel-autoplay.esm-QaDXfp93.js";import"./create-safe-context-91HhculZ.js";import"./index-CWHWfCTA.js";import"./iconBase-wTF-khsr.js";import"./wishlistApiSlice-CuyAJLJs.js";import"./index-Va4Lcz8a.js";const B=()=>{var n;const{primary:i,secondary:p,tertiary:m}=N(),h=D(),r=s=>s.replace(/-/g," ").split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),u=r(i),o=r(p),j=((n=H[u])==null?void 0:n[o])||[],l=s=>{const t=s.target.value;h(`/${i}/${p}/${t.replace(/ /g,"-").toLowerCase()}`)};return e.jsx("div",{className:"flex flex-col space-y-2 mt-4 gap-y-1 px-4",children:j.map(s=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:"primarycategory",value:s,onChange:l,className:"form-radio text-blue-500",checked:m.toLowerCase()===s.replace(/ /g,"-").toLowerCase()}),e.jsx("span",{className:"text-sm font-bold",children:s})]},s))})},te=()=>{var y,b,v;const[i,p]=L(),[m,h]=c.useState(i.get("sort")||"recommended"),[r,u]=c.useState(((y=i.get("discounts"))==null?void 0:y.split(","))||[]),[o,j]=c.useState(((b=i.get("priceRanges"))==null?void 0:b.split(","))||[]),{primary:l,secondary:n,tertiary:s}=N(),{data:t,error:g,isLoading:C}=$({primary:l,secondary:n,tertiary:s,sort:m,discounts:r.join(","),priceRanges:o.join(",")}),P=c.useCallback(f.debounce(a=>h(a),300),[]),S=c.useCallback(f.debounce(a=>{u(a)},300),[]),w=c.useCallback(f.debounce(a=>{j(a)},300),[]);return c.useEffect(()=>{const a=new URLSearchParams;m!=="recommended"&&a.set("sort",m),r.length>0&&a.set("discounts",r.join(",")),o.length>0&&a.set("priceRanges",o.join(",")),p(a)},[m,r,o,p]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"pb-4",children:[e.jsxs("div",{className:"p-4",children:[e.jsx(x,{to:"/",className:"text-sm font-normal hover:underline",children:"HOME"})," / ",e.jsx(x,{to:`/${l}`,className:"text-sm hover:underline",children:l.replace(/-/g," ").toUpperCase()})," / ",e.jsx(x,{to:`/${l}/${n}`,className:"text-sm hover:underline",children:n.replace(/-/g," ").toUpperCase()})," / ",e.jsx(x,{to:`/${l}/${n}/${s}`,className:"text-sm font-bold hover:underline",children:s.replace(/-/g," ").toUpperCase()}),e.jsxs("h2",{className:"font-bold mt-4",children:[s.replace(/-/g," ").toUpperCase()," -"," ",e.jsxs("span",{className:"text-gray-500 font-light mt-4",children:[t&&t.length," items"]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsx("h2",{className:"font-bold",children:"FILTERS"}),e.jsx(E,{data:[{value:"recommended",label:"Recommended"},{value:"new",label:"What's New"},{value:"discount",label:"Better Discount"},{value:"rating",label:"Top Rated"},{value:"pl2h",label:"Price: Low To High"},{value:"ph2l",label:"Price: High To Low"}],defaultValue:"recommended",allowDeselect:!1,onChange:P})]})]}),e.jsx(d,{}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-[15%] sm:hidden",children:[e.jsx(B,{}),e.jsx(d,{my:"lg"}),e.jsx(k,{selectedPriceRanges:o,onPriceRangeChange:w}),e.jsx(d,{my:"lg"}),e.jsx(F,{selectedDiscounts:r,onDiscountChange:S}),e.jsx(d,{mt:"lg"})]}),e.jsx(d,{className:"h-auto",orientation:"vertical"}),e.jsxs("div",{className:"w-[85%] sm:w-full",children:[C&&e.jsx("div",{className:"grid grid-cols-5 gap-x-10 gap-y-8 p-10 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 sm:p-3 sm:gap-x-4 xsm:grid-cols-1",children:Array.from({length:10}).map((a,R)=>e.jsx(U,{},R))}),g&&e.jsxs("p",{className:"text-xs font-semibold",children:["Error: ",(v=g==null?void 0:g.data)==null?void 0:v.message]}),e.jsx("div",{children:t&&t.length>0?e.jsx(T,{product:t}):!C&&e.jsx("p",{className:"text-center mt-4 border rounded px-20 font-bold bg-red-300 py-2 w-fit mx-auto mb-2",children:"No products found."})}),e.jsx(d,{})]})]})]}),e.jsx(A,{})]})};export{te as default};
