import{r,d as A,a as I,j as e,N as M,B as c}from"./index-Dn45rCbr.js";import{d as U}from"./userApiSlice-BcONqH5P.js";import{b as G,c as Q}from"./vendorApiSlice-BCrYRZwa.js";import{e as H}from"./productsApiSlice-C1zCf8O4.js";import{S as n}from"./Skeleton-9Y7E4ClX.js";const X=()=>{const[p,S]=r.useState(""),[u,R]=r.useState(""),[x,z]=r.useState(""),[m,h]=r.useState(""),[g,f]=r.useState(""),[y,b]=r.useState(""),[j,N]=r.useState(""),{uid:L}=A(),k=I(),{data:l,isLoading:P,error:v}=U(L),[E,{isLoading:w}]=G(),[F,{isLoading:s}]=H(),{data:B,isLoading:D,error:K}=Q();r.useEffect(()=>{l&&(S(l.name),R(l.phone))},[l]);const V=async a=>{var d;a.preventDefault();try{await E({name:p,phone:u,email:x,citizenshipFront:m,citizenshipBack:g,panCard:y,companyRegistration:j}).unwrap(),c.success("Application Submitted"),k("/vendor")}catch(i){c.error(((d=i==null?void 0:i.data)==null?void 0:d.message)||i.error)}},o=async(a,d)=>{var q;const i=a.target.files[0];if(i.size>4e5){c.error("Each image must be less than 400KB");return}const C=new FormData;C.append("image",i);try{const t=await F(C).unwrap();switch(d){case"citizenshipFront":h(t.image);break;case"citizenshipBack":f(t.image);break;case"panCard":b(t.image);break;case"companyRegistration":N(t.image);break;default:break}}catch(t){c.error(((q=t==null?void 0:t.data)==null?void 0:q.message)||t.error)}};return e.jsx("div",{className:"py-10 sm:px-2",children:P||D?e.jsxs("div",{className:"flex flex-col gap-y-4 w-1/2 sm:w-full mx-auto",children:[e.jsx(n,{height:75})," ",e.jsx(n,{height:75}),e.jsx(n,{height:75})," ",e.jsx(n,{height:75}),e.jsx(n,{height:75})," ",e.jsx(n,{height:75})]}):v?e.jsx("p",{children:v.data.message}):l.isVendor?e.jsx(M,{to:"/"}):B?e.jsx("p",{className:"font-bold mt-4 text-center text-gray-500 text-xl",children:"Your Request Is Pending"}):e.jsxs("form",{className:"flex flex-col items-center gap-y-4 w-1/2 md:w-3/4 sm:w-full mx-auto border p-4 rounded shadow",onSubmit:V,children:[e.jsx("p",{className:"text-lg font-bold text-gray-500",children:"Vendorship Application Form"}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-bold text-gray-600",children:"Name"}),e.jsx("input",{type:"text",value:p,className:"border rounded px-2 py-1 w-full",disabled:!0,maxLength:"30"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-bold text-gray-600",children:"Phone"}),e.jsx("input",{type:"text",value:u,className:"border rounded px-2 py-1 w-full",disabled:!0,maxLength:"10"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-bold text-gray-600",children:"Email"}),e.jsx("input",{type:"text",value:x,onChange:a=>z(a.target.value),className:"border rounded px-2 py-1 w-full",placeholder:"Enter email",required:!0,maxLength:"40"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-bold text-gray-600",children:"Citizenship Front"}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Citizenship Front",value:m,onChange:a=>h(a.target.value),className:"px-2 py-1 border",disabled:!0,required:!0}),e.jsx("input",{type:"file",required:!0,onChange:a=>o(a,"citizenshipFront"),disabled:s}),s&&e.jsx("p",{className:"text-sm font-bold",children:"Loading..."})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-bold text-gray-600",children:"Citizenship Back"}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Citizenship Back",value:g,onChange:a=>f(a.target.value),className:"px-2 py-1 border",required:!0,disabled:!0}),e.jsx("input",{type:"file",required:!0,onChange:a=>o(a,"citizenshipBack"),disabled:s}),s&&e.jsx("p",{className:"text-sm font-bold",children:"Loading..."})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-bold text-gray-600",children:"Pan Card"}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Pan Card",value:y,onChange:a=>b(a.target.value),className:"px-2 py-1 border",required:!0,disabled:!0}),e.jsx("input",{type:"file",required:!0,onChange:a=>o(a,"panCard"),disabled:s}),s&&e.jsx("p",{className:"text-sm font-bold",children:"Loading..."})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-bold text-gray-600",children:"Company Registration"}),e.jsxs("div",{className:"flex flex-col gap-y-2",children:[e.jsx("input",{type:"text",placeholder:"Company Registration",value:j,onChange:a=>N(a.target.value),className:"px-2 py-1 border",required:!0,disabled:!0}),e.jsx("input",{type:"file",required:!0,onChange:a=>o(a,"companyRegistration"),disabled:s}),s&&e.jsx("p",{className:"text-sm font-bold",children:"Loading..."})]})]}),e.jsx("button",{type:"submit",className:"text-sm font-bold bg-blue-600 rounded text-center w-1/2 text-white py-2",disabled:w,children:w?"Submitting...":"Submit Application"})]})})};export{X as default};
